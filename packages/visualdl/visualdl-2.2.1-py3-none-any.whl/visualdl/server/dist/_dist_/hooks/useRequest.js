import{useEffect as i,useMemo as a}from"../../__snowpack__/pkg/react.js";import m from"../utils/event.js";import{toast as p}from"../../__snowpack__/pkg/react-toastify.js";import R from"../../__snowpack__/pkg/swr.js";function v(...f){const s=f[0],{data:r,error:e,...o}=R(...f),t=a(()=>!!s&&r===void 0&&!e,[s,r,e]);return i(()=>{e&&p(e.message,{position:p.POSITION.TOP_CENTER,type:p.TYPE.ERROR})},[e]),{data:r,error:e,loading:t,...o}}function k(...f){const[s,r,...e]=f;let o,t;e.length>1?(o=e[0],t=e[1]):e[0]!=null&&(typeof e[0]=="object"?t=e[0]:typeof e[0]=="function"&&(o=e[0]));const u=a(()=>{var l,c,_;return{...t,refreshInterval:r?(l=t==null?void 0:t.refreshInterval)!=null?l:15*1e3:0,dedupingInterval:(c=t==null?void 0:t.refreshInterval)!=null?c:15*1e3,errorRetryInterval:(_=t==null?void 0:t.refreshInterval)!=null?_:15*1e3}},[t,r]),h=a(()=>o===void 0?[s,u]:[s,o,u],[s,o,u]),{mutate:n,...d}=v(...h);return i(()=>{r&&n()},[r,n]),i(()=>(m.on("refresh",n),()=>{m.off("refresh",n)}),[n]),{mutate:n,...d}}export default v;export{k as useRunningRequest};
